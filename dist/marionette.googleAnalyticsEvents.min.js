!function(a){"function"==typeof define&&define.amd?define(["marionette","backbone","underscore","ga"],a):a(Marionette,Backbone,_,window.ga)}(function(a,b,c,d){function e(){var a=arguments;c.defer(function(){try{if(!d)throw new Error('Google Analytics function "ga" is not defined');d.apply(null,a)}catch(b){console.error(b)}})}var f=b.history.navigate,g=a.View.prototype.configureTriggers;b.history.navigate=function(a){try{e("send","event","route","navigate","/"+a)}catch(b){console&&console.error&&console.error(b)}finally{f.apply(this,arguments)}},a.View.prototype.configureTriggers=function(){var a,b=g.apply(this,arguments);try{if(!this.triggers)return;a=this.normalizeUIKeys(c.result(this,"triggers")),c.each(a,function(a,f){var g=b[f];c.isObject(a)&&a.googleAnalyticsConfig&&(a=c.defaults(a,{preventDefault:!0,stopPropagation:!0}),b[f]=c.bind(function(a){var b,d;for(g.apply(this,c.rest(arguments,2)),b=c.isFunction(a)?a.call(this):a,d=["send","event",b.category,b.event,b.label];d.length&&c.isUndefined(c.last(d));)d.pop();e.apply(null,d)},this,a.googleAnalyticsConfig,d))},this)}catch(f){console&&console.error&&console.error(f)}finally{return b}}});